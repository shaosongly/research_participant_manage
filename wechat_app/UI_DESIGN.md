# 微信小程序访视计划工具 - UI 设计文档

## 1. 目标与设计原则
### 1.1 目标
- 降低使用成本：用户最少输入即可生成计划。
- 提升效率：核心流程 2-3 步内完成。
- 可信与专业：视觉风格符合临床研究使用场景。

### 1.2 设计原则
- 清晰优先：信息层级明确，避免一屏过多内容。
- 可操作性强：按钮清晰、触控区域足够大。
- 反馈及时：输入校验、导出结果、保存提示明确。

## 2. 信息架构与导航
### 2.1 页面清单
- 方案列表（入口）
- 方案编辑（新建/编辑）
- 计划生成（选择方案 + 首访日期）
- 计划结果（展示/导出/保存）
- 节假日管理
- 历史记录列表
- 历史记录详情

### 2.2 导航结构
- 底部 Tab 建议：
  - 方案
  - 生成
  - 历史
  - 节假日
- 页面内跳转：
  - 方案列表 -> 方案编辑
  - 方案列表 -> 计划生成（带选中方案）
  - 计划生成 -> 计划结果
  - 历史列表 -> 历史详情

## 3. 关键用户流程
### 3.1 新建方案
方案列表 -> 点击“新建方案” -> 填写表单 -> 保存 -> 返回方案列表

### 3.2 生成计划
选择方案 -> 选择首访日期 -> 生成计划 -> 查看结果 -> 保存/导出

### 3.3 节假日管理
节假日列表 -> 新增/编辑 -> 保存 -> 回列表

### 3.4 历史记录查看
历史列表筛选 -> 查看详情 -> 导出

## 4. 页面级设计说明
### 4.1 方案列表
**目的**
- 管理实验方案，作为计划生成入口。

**模块**
- 顶部标题 + 简短说明
- 方案卡片列表（名称、访视次数、频率/窗口概览）
- 主操作按钮：新建方案
- 空状态：提示“暂无方案”，引导创建

**交互**
- 卡片点击进入编辑
- 卡片右侧快捷操作：复制、删除（可选）

### 4.2 方案编辑
**目的**
- 录入或修改方案规则。

**模块**
- 表单分区：
  - 基本信息（名称）
  - 访视规则（总次数、频率、窗口）
  - 访视命名（可选）
- 固定/可变频率切换（Segment 或单选）
- 固定/可变窗口切换
- 保存按钮固定在底部

**交互**
- 输入实时校验（数量匹配）
- 保存成功提示 + 返回列表

### 4.3 计划生成
**目的**
- 选择方案与首访日期，生成访视计划。

**模块**
- 方案选择器（下拉）
- 首访日期选择器
- 生成按钮（主按钮）
- 简要说明（频率/窗口概览）

**交互**
- 生成成功后跳转结果页
- 无效输入即时提示

### 4.4 计划结果
**目的**
- 展示完整计划、统计节假日影响并导出。

**模块**
- 顶部摘要卡片：
  - 方案名称
  - 首访日期
  - 总访视次数
  - 无法避开节假日次数
- 计划表（卡片列表）
  - 访视名称
  - 日期类型（提前/基准/延后）
  - 日期
  - 节假日信息
- 操作区：
  - 保存到历史
  - 导出 Excel
  - 重新生成（调整首访日期）

**交互**
- 节假日条目高亮
- 点击“调整首访日期”打开日期选择

### 4.5 节假日管理
**目的**
- 覆盖法定节假日，维护项目特定假期。

**模块**
- 顶部说明（数据来源）
- 列表（日期 + 类型 + 名称）
- 新增/编辑按钮
- 空状态提示

**交互**
- 新增时选择日期、节假日/工作日、名称
- 保存后返回列表

### 4.6 历史记录列表
**目的**
- 快速查看已生成的访视计划记录。

**模块**
- 筛选栏（方案名、日期范围可选）
- 记录列表卡片（方案、首访日期、保存时间）
- 空状态

**交互**
- 点击卡片进入详情
- 允许删除单条记录

### 4.7 历史记录详情
**目的**
- 查看单次计划完整详情并导出。

**模块**
- 计划摘要卡片
- 访视列表（同结果页）
- 导出按钮

## 5. 组件与样式规范
### 5.1 表单
- 单列布局
- 表单项间距 16-20px
- 重要输入使用数字键盘或选择器

### 5.2 列表/卡片
- 卡片圆角 12px
- 卡片内边距 16px
- 标题字体稍大，信息分组清晰

### 5.3 按钮
- 主按钮：高亮主色，宽度优先
- 次按钮：描边或浅色填充
- 触控高度不低于 44px

## 6. 视觉规范
### 6.1 色彩
- 主色：蓝色系（专业感）
- 成功：绿色
- 警示/节假日：橙/红
- 背景：浅灰或浅蓝

### 6.2 字体
- 标题：16-18px
- 正文：14-16px
- 辅助：12-13px

### 6.3 图标
- 使用线性图标
- 统一风格，避免过度装饰

## 7. 状态设计
- 空状态：图标 + 文案 + 行动按钮
- 加载状态：骨架屏或 Loading
- 错误状态：顶部提示条 + 明确错误说明
- 导出成功：Toast

## 8. 适配与可用性
- 小屏幕单列布局
- 重要操作按钮固定在底部
- 关键操作提供二次确认（删除/覆盖）

## 9. 交付物建议
- 关键页面线框图：方案列表、计划生成、计划结果
- 组件示例图：按钮、卡片、列表、统计卡片
- 色板与字号规范表

